(self.webpackChunkblog=self.webpackChunkblog||[]).push([[358],{54358:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ue}});n(74916),n(15306),n(64765),n(35666);var r,a=n(63804),o=n.n(a);!function(e){e.BLOG_STORE_ACCOUNT="BLOG_STORE_ACCOUNT"}(r||(r={}));var c=n(80051),l=n(39967),u=n(85344),i=n(96156),s=n(22122),f=n(94184),p=n.n(f),d=n(17375),m=n(28991),v=n(6610),y=n(5991),h=n(65255),b=n(54070),g=function(e){(0,h.Z)(n,e);var t=(0,b.Z)(n);function n(e){var r;(0,v.Z)(this,n),(r=t.call(this,e)).handleChange=function(e){var t=r.props,n=t.disabled,a=t.onChange;n||("checked"in r.props||r.setState({checked:e.target.checked}),a&&a({target:(0,m.Z)((0,m.Z)({},r.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},r.saveInput=function(e){r.input=e};var a="checked"in e?e.checked:e.defaultChecked;return r.state={checked:a},r}return(0,y.Z)(n,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,r=t.className,a=t.style,c=t.name,l=t.id,u=t.type,f=t.disabled,m=t.readOnly,v=t.tabIndex,y=t.onClick,h=t.onFocus,b=t.onBlur,g=t.onKeyDown,O=t.onKeyPress,k=t.onKeyUp,C=t.autoFocus,E=t.value,x=t.required,Z=(0,d.Z)(t,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),w=Object.keys(Z).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=Z[t]),e}),{}),P=this.state.checked,j=p()(n,r,(e={},(0,i.Z)(e,"".concat(n,"-checked"),P),(0,i.Z)(e,"".concat(n,"-disabled"),f),e));return o().createElement("span",{className:j,style:a},o().createElement("input",(0,s.Z)({name:c,id:l,type:u,required:x,readOnly:m,disabled:f,tabIndex:v,className:"".concat(n,"-input"),checked:!!P,onClick:y,onFocus:h,onBlur:b,onKeyUp:k,onKeyDown:g,onKeyPress:O,onChange:this.handleChange,autoFocus:C,ref:this.saveInput,value:E},w)),o().createElement("span",{className:"".concat(n,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?(0,m.Z)((0,m.Z)({},t),{},{checked:e.checked}):null}}]),n}(a.Component);g.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};var O=g,k=n(85061),C=n(28481),E=n(98423),x=n(86032),Z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},w=a.createContext(null),P=function(e){var t=e.defaultValue,n=e.children,r=e.options,o=void 0===r?[]:r,c=e.prefixCls,l=e.className,u=e.style,f=e.onChange,d=Z(e,["defaultValue","children","options","prefixCls","className","style","onChange"]),m=a.useContext(x.E_),v=m.getPrefixCls,y=m.direction,h=a.useState(d.value||t||[]),b=(0,C.Z)(h,2),g=b[0],O=b[1],P=a.useState([]),j=(0,C.Z)(P,2),N=j[0],S=j[1];a.useEffect((function(){"value"in d&&O(d.value||[])}),[d.value]);var I=function(){return o.map((function(e){return"string"==typeof e?{label:e,value:e}:e}))},A=v("checkbox",c),K="".concat(A,"-group"),_=(0,E.Z)(d,["value","disabled"]);o&&o.length>0&&(n=I().map((function(e){return a.createElement(L,{prefixCls:A,key:e.value.toString(),disabled:"disabled"in e?e.disabled:d.disabled,value:e.value,checked:-1!==g.indexOf(e.value),onChange:e.onChange,className:"".concat(K,"-item"),style:e.style},e.label)})));var D={toggleOption:function(e){var t=g.indexOf(e.value),n=(0,k.Z)(g);if(-1===t?n.push(e.value):n.splice(t,1),"value"in d||O(n),f){var r=I();f(n.filter((function(e){return-1!==N.indexOf(e)})).sort((function(e,t){return r.findIndex((function(t){return t.value===e}))-r.findIndex((function(e){return e.value===t}))})))}},value:g,disabled:d.disabled,name:d.name,registerValue:function(e){S((function(t){return[].concat((0,k.Z)(t),[e])}))},cancelValue:function(e){S((function(t){return t.filter((function(t){return t!==e}))}))}},R=p()(K,(0,i.Z)({},"".concat(K,"-rtl"),"rtl"===y),l);return a.createElement("div",(0,s.Z)({className:R,style:u},_),a.createElement(w.Provider,{value:D},n))},j=a.memo(P),N=n(21687),S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},I=function(e,t){var n,r=e.prefixCls,o=e.className,c=e.children,l=e.indeterminate,u=void 0!==l&&l,f=e.style,d=e.onMouseEnter,m=e.onMouseLeave,v=e.skipGroup,y=void 0!==v&&v,h=S(e,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),b=a.useContext(x.E_),g=b.getPrefixCls,k=b.direction,C=a.useContext(w),E=a.useRef(h.value);a.useEffect((function(){null==C||C.registerValue(h.value),(0,N.Z)("checked"in h||!!C||!("value"in h),"Checkbox","`value` is not a valid prop, do you mean `checked`?")}),[]),a.useEffect((function(){if(!y)return h.value!==E.current&&(null==C||C.cancelValue(E.current),null==C||C.registerValue(h.value)),function(){return null==C?void 0:C.cancelValue(h.value)}}),[h.value]);var Z=g("checkbox",r),P=(0,s.Z)({},h);C&&!y&&(P.onChange=function(){h.onChange&&h.onChange.apply(h,arguments),C.toggleOption&&C.toggleOption({label:c,value:h.value})},P.name=C.name,P.checked=-1!==C.value.indexOf(h.value),P.disabled=h.disabled||C.disabled);var j=p()((n={},(0,i.Z)(n,"".concat(Z,"-wrapper"),!0),(0,i.Z)(n,"".concat(Z,"-rtl"),"rtl"===k),(0,i.Z)(n,"".concat(Z,"-wrapper-checked"),P.checked),(0,i.Z)(n,"".concat(Z,"-wrapper-disabled"),P.disabled),n),o),I=p()((0,i.Z)({},"".concat(Z,"-indeterminate"),u));return a.createElement("label",{className:j,style:f,onMouseEnter:d,onMouseLeave:m},a.createElement(O,(0,s.Z)({},P,{prefixCls:Z,className:I,ref:t})),void 0!==c&&a.createElement("span",null,c))},A=a.forwardRef(I);A.displayName="Checkbox";var L=A,K=L;K.Group=j,K.__ANT_CHECKBOX=!0;var _=K,D=n(82482),R=n(55026),B=n(39668),F=n(66132),G=n(71230),M=n(15746),V=n(71577),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"}}]},name:"github",theme:"outlined"},U=n(30076),q=function(e,t){return a.createElement(U.Z,Object.assign({},e,{ref:t,icon:T}))};q.displayName="GithubOutlined";var z=a.forwardRef(q),H=n(80129),$=n(95325),Q=n(87190),W=function(e){return{type:Q.c.LOGIN,params:e}},X=n(847);function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t,n,r,a,o,c){try{var l=e[o](c),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}function re(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){ne(o,r,a,c,l,"next",e)}function l(e){ne(o,r,a,c,l,"throw",e)}c(void 0)}))}}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ce={labelCol:{span:5},wrapperCol:{span:16}},le={wrapperCol:{offset:5,span:16}},ue=(0,a.memo)((function(){var e,t=(0,X.useHistory)(),n=(0,$.useDispatch)(),i=ae(D.Z.useForm(),1)[0],s=(0,$.useSelector)((function(e){return e.user})),f=ae((0,c._)(r.BLOG_STORE_ACCOUNT),2),p=f[0],d=f[1],m=ae((0,c.G2)(l.zA.k_),4),v=m[1],y=m[3],h=(0,a.useCallback)((function(){var e=(0,H.parse)(location.search,{ignoreQueryPrefix:!0}).redirect;e?window.location.href=Array.isArray(e)?e[0]:e:t.replace("/center")}),[t]),b=(0,a.useCallback)((function(){i.validateFields().then(function(){var e=re(regeneratorRuntime.mark((function e(t){var r,a,o,c,i,s,f,p,m,v,y,b,g,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.password,o=t.autoLogin,c=t.captcha,R.ZP.loading({content:"正在登录...",key:"login",duration:0}),e.next=4,l.zA.Sw(c);case 4:if(i=e.sent,s=ae(i,2),!s[1]){e.next=10;break}return R.ZP.error({content:"验证码错误",key:"login"}),e.abrupt("return");case 10:return e.next=12,l.zA.$3();case 12:if(f=e.sent,p=ae(f,2),m=p[0],!p[1]&&null!=m&&null!==(r=m.data)&&void 0!==r&&r.item){e.next=19;break}return R.ZP.error({content:"登录失败",key:"login"}),e.abrupt("return");case 19:return v=(0,u.jm)((0,u.qC)(a),m.data.item),e.next=22,l.zA.x4(ee(ee({},t),{},{password:v}));case 22:if(y=e.sent,b=ae(y,2),g=b[0],!(O=b[1])){e.next=29;break}return R.ZP.error({content:O.message||"登录失败",key:"login"}),e.abrupt("return");case 29:R.ZP.success({content:"登录成功",key:"login"}),d({autoLogin:o,autoLoginMark:o}),n(W(g.data)),h();case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){R.ZP.error("请检查表单是否填写无误")}))}),[i,n,h,d]);return(0,a.useEffect)((function(){if(null!=s&&s.account)return h();re(regeneratorRuntime.mark((function e(){var t,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.zA.x4({autoLogin:!0});case 2:if(r=e.sent,a=ae(r,1),null!=(o=a[0])&&null!==(t=o.data)&&void 0!==t&&t.account){e.next=7;break}return e.abrupt("return");case 7:n(W(o.data)),h();case 9:case"end":return e.stop()}}),e)})))()}),[s,n,h]),o().createElement("div",{style:{minHeight:"100vh",background:"#f0f2f5",display:"flex",justifyContent:"center",alignItems:"center"}},o().createElement(B.Z,{style:{width:500}},o().createElement("div",{className:"mt15 mb20",style:{display:"flex",justifyContent:"center",alignItems:"center"}},o().createElement("img",{src:"".concat("","/public/assets/images/logo.png"),style:{width:40,height:40,borderRadius:"50%"}}),o().createElement("span",{style:{fontSize:36,fontWeight:"bold",marginLeft:16}},"briefNull")),o().createElement(D.Z,J({},ce,{form:i,name:"login",initialValues:{autoLogin:Boolean(null==p?void 0:p.autoLogin)}}),o().createElement(D.Z.Item,{label:"Account",name:"account",rules:[{required:!0,message:"Please input your account!"}]},o().createElement(F.Z,null)),o().createElement(D.Z.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},o().createElement(F.Z.Password,null)),o().createElement(D.Z.Item,{label:"Captcha"},o().createElement(G.Z,{gutter:8},o().createElement(M.Z,{span:18},o().createElement(D.Z.Item,{noStyle:!0,name:"captcha",rules:[{required:!0,message:"Please input captcha!"}]},o().createElement(F.Z,{placeholder:"captcha"}))),o().createElement(M.Z,{span:6},o().createElement("img",{alt:"验证码",src:(null==v||null===(e=v.data)||void 0===e?void 0:e.item)&&"data:image/png;base64,".concat(v.data.item),style:{height:31,width:"100%",border:"1px solid gray",padding:3,cursor:"pointer"},onClick:y})))),o().createElement(D.Z.Item,J({},le,{name:"autoLogin",valuePropName:"checked"}),o().createElement(_,null,"Remember me")),o().createElement(D.Z.Item,le,o().createElement(V.Z,{block:!0,type:"primary",onClick:b},"登录")),o().createElement(D.Z.Item,le,o().createElement(G.Z,null,o().createElement(M.Z,{span:14},"其他方式",o().createElement(z,{className:"font24 ml10 pointer"})),o().createElement(M.Z,{span:10,className:"text-right"},o().createElement(X.Link,{to:"/register"},"注册账户")))))))}))}}]);
//# sourceMappingURL=358.js.map